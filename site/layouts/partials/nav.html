{{ $currentPage := . }}

<nav class="flex items-center justify-between bb bg-primary pa2">
	<!-- Logo Section -->
	<div class="flex-shrink-0">
		<a href="/" class="db">
			<img src="/img/logo_2000.webp" alt="{{ .Site.Title }}" class="h2 w-auto"/>
		</a>
	</div>

	<!-- Main Navigation - Center -->
	<div class="flex-grow-1 tc">
		<ul class="flex justify-center items-center list ma0 pa0 nav-main">
			<!-- All items are now collapsible -->
			<li class="nav-item nav-show-xl"><a href="/" class="pa2 no-underline db nowrap {{ if .IsHome }}bg-white primary{{ else }}white{{ end }}">Home</a></li>
			<li class="nav-item nav-show-lg"><a href="/success-stories/" class="pa2 no-underline db nowrap {{ if or (eq $currentPage.Section "success-stories") }}bg-white primary{{ else }}white{{ end }}">Success Stories</a></li>
			<li class="nav-item nav-show-md"><a href="/how-it-works/" class="pa2 no-underline db nowrap {{ if or (eq $currentPage.Section "how-it-works") }}bg-white primary{{ else }}white{{ end }}">How It Works</a></li>
			<li class="nav-item nav-show-sm"><a href="/control-employer/" class="pa2 no-underline db nowrap {{ if or (eq $currentPage.Section "control-employer") }}bg-white primary{{ else }}white{{ end }}">Be a Control Employer</a></li>
			<li class="nav-item nav-show-xs"><a href="/team/" class="pa2 no-underline db nowrap {{ if or (eq $currentPage.Section "team") }}bg-white primary{{ else }}white{{ end }}">The Team</a></li>
			<li class="nav-item nav-show-xs2"><a href="/contact/" class="pa2 no-underline db nowrap {{ if or (eq $currentPage.Section "contact") }}bg-white primary{{ else }}white{{ end }}">Contact Us</a></li>
			<li class="nav-item nav-show-xs3"><a href="/resources/" class="pa2 no-underline db nowrap {{ if or (eq $currentPage.Section "resources") }}bg-white primary{{ else }}white{{ end }}">Resources</a></li>
			<li class="nav-item nav-show-xs4"><a href="/signup/" class="pa2 no-underline db nowrap bg-accent white br2">Join the Programme</a></li>

			<!-- More dropdown with text - shows when some items are hidden -->
			<li class="nav-more nav-more-text relative">
				<a href="#" class="pa2 no-underline db white nowrap dropdown-toggle">More <span class="sub-arrow">â–¼</span></a>
				<ul class="dropdown-menu absolute bg-white shadow-1 list ma0 pa0 nowrap dn top-100 left-0 z-1">
					<li class="nav-hide-xl"><a href="/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">Home</a></li>
					<li class="nav-hide-lg"><a href="/success-stories/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">Success Stories</a></li>
					<li class="nav-hide-md"><a href="/how-it-works/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">How It Works</a></li>
					<li class="nav-hide-sm"><a href="/control-employer/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">Be a Control Employer</a></li>
					<li class="nav-hide-xs"><a href="/team/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">The Team</a></li>
					<li class="nav-hide-xs2"><a href="/contact/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">Contact Us</a></li>
					<li class="nav-hide-xs3"><a href="/resources/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">Resources</a></li>
					<li class="nav-hide-xs4"><a href="/signup/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">Join the Programme</a></li>
				</ul>
			</li>

			<!-- Hamburger menu - shows when ALL items are hidden -->
			<li class="nav-more nav-more-hamburger relative">
				<a href="#" class="pa2 no-underline db white nowrap dropdown-toggle hamburger-button">
					<div class="hamburger">
						<span class="hamburger-line"></span>
						<span class="hamburger-line"></span>
						<span class="hamburger-line"></span>
					</div>
				</a>
				<ul class="dropdown-menu absolute bg-white shadow-1 list ma0 pa0 nowrap dn top-100 left-0 z-1">
					<li><a href="/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">Home</a></li>
					<li><a href="/success-stories/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">Success Stories</a></li>
					<li><a href="/how-it-works/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">How It Works</a></li>
					<li><a href="/control-employer/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">Be a Control Employer</a></li>
					<li><a href="/team/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">The Team</a></li>
					<li><a href="/contact/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">Contact Us</a></li>
					<li><a href="/resources/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">Resources</a></li>
					<li><a href="/signup/" class="pa2 no-underline db primary hover-bg-light-gray nowrap">Join the Programme</a></li>
				</ul>
			</li>
		</ul>
	</div>

	<!-- Social Icons Section - Right -->
	<div class="flex-shrink-0">
		{{ range .Site.Data.navigation.social }}
		<a href="{{ .url }}" target="_blank" title="{{ .platform }}" class="white pa2 dib">
			<div class="w1 h1">{{ .svg | safeHTML }}</div>
		</a>
		{{ end }}
	</div>
</nav>

<style>
	/* Prevent text wrapping and maintain consistent font size */
	.nowrap {
		white-space: nowrap;
		font-size: 1rem;
	}

	.nav-main {
		font-size: 1rem;
	}

	/* Default: Hide both More options */
	.nav-more { display: none; }
	.nav-hide-xl, .nav-hide-lg, .nav-hide-md, .nav-hide-sm, .nav-hide-xs, .nav-hide-xs2, .nav-hide-xs3, .nav-hide-xs4 {
		display: none;
	}

	/* Hamburger icon styles */
	.hamburger {
		width: 20px;
		height: 14px;
		display: flex;
		flex-direction: column;
		justify-content: space-between;
	}

	.hamburger-line {
		width: 100%;
		height: 2px;
		background-color: currentColor;
		border-radius: 1px;
	}

	.hamburger-button {
		display: flex;
		align-items: center;
		justify-content: center;
	}

	/* Progressive hiding as screen gets smaller */
	@media (max-width: 1400px) {
		.nav-show-xl { display: none; }
		.nav-hide-xl { display: block; }
		.nav-more-text { display: block; }
	}

	@media (max-width: 1200px) {
		.nav-show-lg { display: none; }
		.nav-hide-lg { display: block; }
	}

	@media (max-width: 1000px) {
		.nav-show-md { display: none; }
		.nav-hide-md { display: block; }
	}

	@media (max-width: 800px) {
		.nav-show-sm { display: none; }
		.nav-hide-sm { display: block; }
	}

	@media (max-width: 700px) {
		.nav-show-xs { display: none; }
		.nav-hide-xs { display: block; }
	}

	@media (max-width: 600px) {
		.nav-show-xs2 { display: none; }
		.nav-hide-xs2 { display: block; }
	}

	@media (max-width: 500px) {
		.nav-show-xs3 { display: none; }
		.nav-hide-xs3 { display: block; }
	}

	@media (max-width: 400px) {
		.nav-show-xs4 { display: none; }
		.nav-hide-xs4 { display: block; }
	}

	/* When ALL items are hidden, switch to hamburger */
	@media (max-width: 350px) {
		.nav-more-text { display: none; }
		.nav-more-hamburger { display: block; }
	}

	/* Dropdown styles */
	.dropdown-menu {
		min-width: 200px;
	}

	.dropdown-toggle:hover + .dropdown-menu,
	.dropdown-menu:hover {
		display: block !important;
	}

	.hover-bg-light-gray:hover {
		background-color: #f4f4f4;
	}

	.sub-arrow {
		font-size: 0.8em;
		margin-left: 0.25rem;
	}

	.flex-shrink-0 {
		flex-shrink: 0;
	}
</style>